function delete_item(){let t=$(this).data("url"),e=$(this).data("id");const n=$(`#row_${e}`),o=$(this).closest(".child"),i=$(this).closest(".project-card");swal.fire({title:"Emin misiniz?",text:"Bu işlem için devam etmek ister misiniz?",icon:"warning",cancelButtonText:"Hayır",confirmButtonText:"Evet",allowOutsideClick:!1,showDenyButton:!0,reverseButtons:!0,confirmButtonColor:"#45cb85"}).then((e=>{e.isConfirmed&&$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:t,method:"DELETE",success:function(t){let e="success"==t.type?"success":"error";const a="success"==e?t.success:t.error;e&&(swal.fire({title:e,text:a,icon:e}),"success"==e&&(o.remove(),i.length>0&&i.remove(),n.remove()))},error:function(t){swal.fire({title:"Error",text:"Beklenmedik hata oluştu. Sonra tekrar deneyiniz.",icon:"error"})}})}))}function count_items(){setInterval((function(){$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/api/count-items",method:"post",data:{control:true},success:function(t){t&&(t.countManager&&$("#countUser").html(t.countUser),t.countManager&&$("#countManager").html(t.countManager),t.countStaff&&$("#countStaff").html(t.countStaff),t.countConsultant&&$("#countConsultant").html(t.countConsultant),t.countCustomer&&$("#countCustomer").html(t.countCustomer),t.countBranch&&$("#countBranch").html(t.countBranch),t.countMyBranch&&$("#countMyBranch").html(t.countMyBranch),t.countMyCustomer&&$("#countMyCustomer").html(t.countMyCustomer),t.countMeeting&&$("#countMeeting").html(t.countMeeting),t.countMyMeeting&&$("#countMyMeeting").html(t.countMyMeeting),t.countNextMeeting&&$("#countNextMeeting").html(t.countNextMeeting),t.countProject&&$("#countProject").html(t.countProject),t.countSale&&$("#countSale").html(t.countSale),t.countMyBids&&$("#myBids").html(t.countMyBids))}})}),1500)}function check_staff_usage_date(){setInterval((function(){$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/api/check-usage-date-for-staff",method:"post",data:{control:true},success:function(t){if(t)return!0}})}),1500)}function show_item(){const t=$(this).data("url"),e=$(this).data("result"),n=$(this).data("target");$(e).empty(),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:t,method:"get",success:function(t){t&&($(e).html(t),n&&$(n).modal("show"))},error:function(){swal.fire({title:"Error",text:"Beklenmedik hata oluştu. Sonra tekrar deneyiniz.",icon:"error"})}})}function get_district_list(){const t=$(this).val(),e="/admin/get-district-list?province_key="+t;t?$.ajax({type:"GET",url:e,success:function(t){t?($("#district").empty(),$("#district").append("<option disabled>İlçe Seçiniz</option>"),$.each(t,(function(t,e){$("#district").append('<option value="'+t+'">'+e+"</option>")}))):$("#district").empty()}}):($("#district").empty(),$("#neighborhood").empty())}function get_neighborhood_list(){const t=$(this).val(),e=`/admin/get-neighborhood-list?district_key=${t}`;t?$.ajax({type:"GET",url:e,success:function(t){t?($("#neighborhood").empty(),$("#neighborhood").append("<option disabled>Mahalle Seçiniz</option>"),$.each(t,(function(t,e){$("#neighborhood").append('<option value="'+t+'">'+e+"</option>")}))):$("#neighborhood").empty()}}):$("#neighborhood").empty()}function init_plugin(){const t=$(".select2").length>0;try{t&&$(".select2").select2()}catch(t){}}function loadStaffs(){let t={};return $.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/api/staffs",method:"get",async:!1,data:{control:t},success:function(e){e&&(t=e)}}),t}function loadPage(){$("#loading").fadeOut(),$("#left-sidebar").removeClass("loading-sidebar"),$("#left-sidebar .invisible").removeClass("invisible")}function load_tinymce(t){if($(t).length>0){const e={selector:t,height:450,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | fontsizeselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"};tinymce.init(e)}}function loadDatatable(t,e,n){$.ajax({method:"GET",contentType:"application/json",url:e,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done((function(e){t.length>0&&t.DataTable({data:e,bDestroy:!0,processing:!0,iDisplayLength:20,ordering:!1,columns:n})}))}!function(){"use strict";window.addEventListener("load",(function(){var t=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(t,(function(t){t.addEventListener("submit",(function(e){!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")}),!1)}))}),!1)}(),$(document).ready((function(){loadPage(),init_plugin(),check_staff_usage_date(),$(".list-container").on("click",".remove-btn",delete_item),$(".card-body").on("click",".remove",delete_item),$(".list-container").on("click",".get-item-btn",show_item),$(".show-item-btn").on("click",show_item),$(".delete-item-btn").on("click",delete_item),$("#province").on("change",get_district_list),$("#district").on("change",get_neighborhood_list),$("table").length>0&&$("table td").addClass("align-middle"),$(".loading-table").addClass("d-none"),$(".table-responsive").css("display","block")}));
